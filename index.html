<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalcIndiaPlayLearn</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0f172a;
            --card-glass: rgba(15, 23, 42, 0.95);
            --border-glass: rgba(255, 255, 255, 0.1);
            --primary: #6366f1;
            --accent: #f43f5e;
            --success: #10b981;
            --gold: #f59e0b;
            --neon-blue: #00f3ff;
            --text-main: #f8fafc;
            --text-sub: #94a3b8;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background-color: var(--bg-dark);
            color: var(--text-main); 
            font-family: 'Outfit', sans-serif;
            min-height: 100vh;
            padding-bottom: 3rem;
            overflow-x: hidden;
            transition: background 0.3s ease;
        }

        /* --- BACKGROUND MODES --- */
        body.mode-tools { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
        body.mode-game { background: radial-gradient(circle at center, #1e1b4b 0%, #020617 100%); }
        body.mode-run { background: linear-gradient(to bottom, #2e1065 0%, #0f172a 100%); }
        body.mode-kids { background: linear-gradient(120deg, #0ea5e9 0%, #8b5cf6 100%); }

        .container { max-width: 1200px; margin: 0 auto; padding: 1rem; }

        header { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 1.5rem 0; margin-bottom: 1.5rem; border-bottom: 1px solid var(--border-glass);
        }
        .brand { font-family: 'Space Grotesk', sans-serif; font-size: 1.8rem; font-weight: 700; background: linear-gradient(to right, #6366f1, #00f3ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: flex; align-items: center; gap: 10px; }

        /* --- NAVIGATION --- */
        .nav-dock { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 2rem; position: relative; z-index: 100; }
        
        .nav-btn {
            width: 100%; padding: 12px; 
            background: rgba(255,255,255,0.05); border: 1px solid var(--border-glass);
            border-radius: 12px; color: var(--text-sub); font-weight: 700; font-size: 0.9rem;
            cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: all 0.2s;
        }
        .nav-btn:hover { background: rgba(255,255,255,0.1); color: white; }
        .nav-btn.active-cat { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 0 15px rgba(99, 102, 241, 0.4); }

        /* Dropdown Menus */
        .submenu {
            position: absolute; top: 110%; left: 0; width: 100%; 
            background: rgba(15, 23, 42, 0.98); border: 1px solid var(--border-glass); 
            border-radius: 16px; padding: 10px; z-index: 200;
            display: none; flex-direction: column; gap: 5px; 
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.5);
        }
        .submenu.show { display: flex; animation: slideDown 0.2s ease-out; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .sub-btn {
            background: transparent; border: none; padding: 12px; 
            color: var(--text-sub); text-align: left; font-size: 1rem; font-weight: 600; 
            cursor: pointer; border-radius: 8px; display: flex; align-items: center; gap: 10px;
        }
        .sub-btn:hover { background: rgba(255,255,255,0.05); color: white; padding-left: 15px; transition: 0.2s; }
        .sub-btn.active { background: rgba(99, 102, 241, 0.2); color: var(--primary); }

        /* --- VIEWS --- */
        .view-section { display: none; } /* Default Hidden */
        .view-section.active { display: grid; animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .tool-layout { grid-template-columns: 1fr 1.5fr; gap: 1.5rem; }
        .game-layout { grid-template-columns: 1fr 350px; gap: 1.5rem; }
        .kid-layout { grid-template-columns: 1fr; gap: 1.5rem; max-width: 800px; margin: 0 auto; }

        /* --- UI ELEMENTS --- */
        .glass-card { background: var(--card-glass); backdrop-filter: blur(20px); border: 1px solid var(--border-glass); border-radius: 20px; padding: 2rem; box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5); }
        
        .input-wrap { margin-bottom: 1.5rem; }
        .input-header { display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-sub); }
        .input-val { font-weight: 700; color: var(--primary); }
        
        input[type=range] { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; -webkit-appearance: none; cursor: pointer; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 18px; width: 18px; border-radius: 50%; background: #fff; margin-top: -6px; }
        
        .big-value { font-size: 3rem; font-weight: 800; background: linear-gradient(to right, #fff, #cbd5e1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .chart-wrapper { position: relative; height: 300px; width: 100%; }

        /* --- GAMES --- */
        .game-screen { background: #000; height: 400px; border-radius: 16px; position: relative; border: 1px solid #333; overflow: hidden; display:flex; flex-direction:column; justify-content:center; align-items:center; }
        .reset-btn { background: rgba(239, 68, 68, 0.2); border: 1px solid rgba(239, 68, 68, 0.5); color: #fca5a5; padding: 5px 12px; border-radius: 8px; cursor: pointer; }
        
        .kid-btn { padding: 15px; border-radius: 12px; border: none; font-size: 1.2rem; font-weight: 800; cursor: pointer; width: 48%; margin: 5px; }
        .btn-need { background: var(--success); color: white; }
        .btn-want { background: var(--accent); color: white; }

        /* Wealth Run */
        #run_game { width: 100%; height: 100%; position: relative; background: linear-gradient(to bottom, #1e1b4b, #4c1d95); perspective: 600px; overflow: hidden; }
        .road { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%) rotateX(60deg); width: 340px; height: 120%; background: #0f172a; border-left: 8px solid var(--neon-blue); border-right: 8px solid var(--neon-blue); }
        .lane-marker { position: absolute; top: 0; left: 33%; width: 4px; height: 100%; background: rgba(255,255,255,0.2); }
        .lane-marker.right { left: 66%; }
        .player-ball { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 3.5rem; transition: left 0.1s; z-index: 10; }
        .obstacle { position: absolute; width: 100%; height: 30px; background: #111; border: 3px solid #ef4444; border-radius: 50%; transform: translateX(-50%); }
        .coin { position: absolute; width: 50px; height: 50px; background: gold; border-radius: 50%; transform: translateX(-50%); border: 3px solid #fff; box-shadow: 0 0 20px gold; }
        .control-pad { display: flex; gap: 20px; margin-top: 15px; width: 100%; justify-content: center; }
        .control-btn { width: 60px; height: 60px; border-radius: 50%; background: rgba(255,255,255,0.1); color: white; font-size: 1.5rem; border: 1px solid rgba(255,255,255,0.2); cursor: pointer; }

        @media (max-width: 900px) { .tool-layout, .game-layout, .kid-layout { grid-template-columns: 1fr; } }
    </style>
</head>
<body class="mode-tools">

<div class="container">
    <header>
        <div class="brand"><i class="ph-fill ph-currency-inr"></i> WealthVerse <span style="font-weight:300; color:white;">v8</span></div>
    </header>

    <nav class="nav-dock">
        <div style="position:relative;">
            <button class="nav-btn active-cat" onclick="toggleMenu('menu-tools')"><i class="ph-bold ph-wrench"></i> Tools</button>
            <div id="menu-tools" class="submenu">
                <button class="sub-btn" onclick="openTool('sip')"><i class="ph-fill ph-trend-up"></i> SIP Calculator</button>
                <button class="sub-btn" onclick="openTool('emi')"><i class="ph-fill ph-house"></i> EMI Calculator</button>
                <button class="sub-btn" onclick="openTool('arb')"><i class="ph-fill ph-scales"></i> Arbitrage</button>
            </div>
        </div>
        <div style="position:relative;">
            <button class="nav-btn" onclick="toggleMenu('menu-arcade')"><i class="ph-bold ph-game-controller"></i> Arcade</button>
            <div id="menu-arcade" class="submenu">
                <button class="sub-btn" onclick="openGame('game1')"><i class="ph-fill ph-chart-candlestick"></i> Trader Pro</button>
                <button class="sub-btn" onclick="openGame('game2')"><i class="ph-fill ph-shield-check"></i> Defense</button>
                <button class="sub-btn" onclick="openGame('game3')"><i class="ph-fill ph-person-simple-run"></i> Wealth Run</button>
            </div>
        </div>
        <div style="position:relative;">
            <button class="nav-btn" onclick="toggleMenu('menu-kids')"><i class="ph-bold ph-baby"></i> Kids</button>
            <div id="menu-kids" class="submenu">
                <button class="sub-btn" onclick="openGame('kid1')"><i class="ph-fill ph-coins"></i> Coin Quest</button>
                <button class="sub-btn" onclick="openGame('kid2')"><i class="ph-fill ph-piggy-bank"></i> Piggy Dash</button>
            </div>
        </div>
    </nav>

    <div id="sip" class="view-section tool-layout active">
        <div class="glass-card">
            <h3>SIP Calculator</h3><br>
            <div class="input-wrap"><div class="input-header"><label>Monthly</label><span class="input-val" id="sip_amt_val">‚Çπ 25 K</span></div><input type="range" id="sip_amt" min="1000" max="200000" step="500" value="25000"></div>
            <div class="input-wrap"><div class="input-header"><label>Years</label><span class="input-val" id="sip_years_val">10 Yrs</span></div><input type="range" id="sip_years" min="1" max="40" step="1" value="10"></div>
            <div class="input-wrap"><div class="input-header"><label>Return</label><span class="input-val" id="sip_rate_val">12 %</span></div><input type="range" id="sip_rate" min="5" max="30" step="0.5" value="12"></div>
        </div>
        <div class="glass-card">
            <div class="big-value" id="sip_final">‚Çπ 0</div>
            <div class="chart-wrapper"><canvas id="sipChart"></canvas></div>
        </div>
    </div>

    <div id="emi" class="view-section tool-layout">
        <div class="glass-card">
            <h3>EMI Calculator</h3><br>
            <div class="input-wrap"><div class="input-header"><label>Loan</label><span class="input-val" id="emi_amt_val">‚Çπ 50 L</span></div><input type="range" id="emi_amt" min="500000" max="10000000" step="100000" value="5000000"></div>
            <div class="input-wrap"><div class="input-header"><label>Years</label><span class="input-val" id="emi_years_val">20 Yrs</span></div><input type="range" id="emi_years" min="1" max="30" step="1" value="20"></div>
            <div class="input-wrap"><div class="input-header"><label>Rate</label><span class="input-val" id="emi_rate_val">8.5 %</span></div><input type="range" id="emi_rate" min="6" max="15" step="0.1" value="8.5"></div>
        </div>
        <div class="glass-card">
            <div class="big-value" id="emi_monthly">‚Çπ 0</div>
            <div class="chart-wrapper"><canvas id="emiChart"></canvas></div>
        </div>
    </div>

    <div id="arb" class="view-section tool-layout">
        <div class="glass-card">
            <h3>Arbitrage Check</h3><br>
            <div class="input-wrap"><div class="input-header"><label>Loan</label><span class="input-val" id="arb_amt_val">‚Çπ 50 L</span></div><input type="range" id="arb_amt" min="500000" max="10000000" step="100000" value="5000000"></div>
            <div class="input-wrap"><div class="input-header"><label>Loan Rate</label><span class="input-val" id="arb_loan_rate_val">8 %</span></div><input type="range" id="arb_loan_rate" min="1" max="15" step="0.1" value="8"></div>
            <div class="input-wrap"><div class="input-header"><label>Inv Return</label><span class="input-val" id="arb_inv_rate_val">12 %</span></div><input type="range" id="arb_inv_rate" min="1" max="20" step="0.1" value="12"></div>
        </div>
        <div class="glass-card">
            <div class="big-value" id="arb_net">‚Çπ 0</div>
            <div class="chart-wrapper"><canvas id="arbChart"></canvas></div>
        </div>
    </div>

    <div id="game1" class="view-section game-layout">
        <div class="glass-card">
            <div style="display:flex;justify-content:space-between;"><h3>Live Market</h3><button class="reset-btn" onclick="resetMM()">Restart</button></div>
            <div class="game-screen"><canvas id="mmChart"></canvas></div>
            <div style="margin-top:10px; display:flex; gap:10px;"><button class="kid-btn btn-need" onclick="mmAction(1)">BUY</button><button class="kid-btn btn-want" onclick="mmAction(-1)">SELL</button></div>
        </div>
        <div class="glass-card"><h4>Equity</h4><div class="big-value" id="mm_val">‚Çπ 10.0 L</div></div>
    </div>

    <div id="game2" class="view-section game-layout">
        <div class="glass-card">
            <div style="display:flex;justify-content:space-between;"><h3>Defense</h3><button class="reset-btn" onclick="resetPD()">Restart</button></div>
            <div style="text-align:center; margin-top:20px;">
                <h2 id="pd_year">Year 1</h2>
                <p id="pd_msg" style="color:var(--text-sub);">Market is Stable</p>
                <div style="display:flex;gap:10px;justify-content:center;margin-top:20px;"><button class="kid-btn btn-need" onclick="pdAction(1.2)">Invest</button><button class="kid-btn btn-want" onclick="pdAction(1.05)">Hold</button></div>
            </div>
        </div>
        <div class="glass-card"><h4>Net Worth</h4><div class="big-value" id="pd_val">‚Çπ 10.0 L</div></div>
    </div>

    <div id="game3" class="view-section kid-layout">
        <div class="glass-card" style="border-color:var(--neon-blue);">
            <div style="display:flex;justify-content:space-between;"><h3>Wealth Run</h3><div class="big-value" style="font-size:1.5rem;" id="run_score">0</div></div>
            <div class="game-screen" style="height:350px; margin-top:10px;">
                <div id="run_game">
                    <div class="road"><div class="lane-marker"></div><div class="lane-marker right"></div></div>
                    <div id="run_player" class="player-ball">üèéÔ∏è</div>
                </div>
            </div>
            <div class="control-pad"><button class="control-btn" onclick="moveRun(-1)"><</button><button class="control-btn" onclick="moveRun(1)">></button></div>
            <div style="text-align:center; margin-top:10px;"><button class="kid-btn btn-need" onclick="startRun()">START GAME</button></div>
        </div>
    </div>

    <div id="kid1" class="view-section kid-layout">
        <div class="glass-card" style="background:rgba(14,165,233,0.1); border-color:var(--kid-blue);">
            <div style="display:flex;justify-content:space-between;"><h3>Coin Quest</h3><button class="reset-btn" onclick="resetKQ()">Reset</button></div>
            <div style="text-align:center; padding:20px;">
                <div style="font-size:5rem;" id="kq_icon">üçé</div>
                <h2 id="kq_item">Apple</h2>
                <div style="display:flex;gap:20px;justify-content:center;margin-top:20px;">
                    <button class="kid-btn btn-need" onclick="checkKQ('need')">NEED</button><button class="kid-btn btn-want" onclick="checkKQ('want')">WANT</button>
                </div>
                <div id="kq_res" style="margin-top:20px;font-weight:bold;"></div>
            </div>
        </div>
    </div>

</div>

<script>
    const formatCurrency = (num) => new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 0 }).format(num);
    let charts = {};

    // --- NAVIGATION ENGINE (FIXED) ---
    function toggleMenu(id) {
        document.querySelectorAll('.submenu').forEach(m => {
            if(m.id !== id) m.classList.remove('show');
        });
        document.getElementById(id).classList.toggle('show');
    }

    function hideAll() {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.submenu').forEach(m => m.classList.remove('show'));
        // Stop Games
        if(runActive) { runActive = false; cancelAnimationFrame(runAnim); }
        if(mmInt) { clearInterval(mmInt); mmInt = null; }
    }

    function openTool(toolId) {
        hideAll();
        document.body.className = 'mode-tools';
        document.getElementById(toolId).classList.add('active');
        
        // **CRITICAL FIX**: Force chart redraw after view is visible
        setTimeout(() => {
            calcTool(toolId);
        }, 50); 
    }

    function openGame(gameId) {
        hideAll();
        document.getElementById(gameId).classList.add('active');
        if(gameId === 'game1') { document.body.className = 'mode-game'; initMM(); }
        if(gameId === 'game2') { document.body.classList.add('mode-game'); }
        if(gameId === 'game3') { document.body.className = 'mode-run'; }
        if(gameId.startsWith('kid')) { document.body.className = 'mode-kids'; if(gameId==='kid1') loadKQ(); }
    }

    // --- CALCULATOR ENGINE (FIXED SLIDERS) ---
    function attachSlider(id) {
        document.getElementById(id).addEventListener('input', function() {
            let val = parseFloat(this.value);
            let suffix = id.includes('rate') ? '%' : (id.includes('years') ? ' Yrs' : '');
            let display = suffix ? val + suffix : formatCurrency(val);
            document.getElementById(id + '_val').innerText = display;
            
            // Determine which calculator is active and run it
            if(document.getElementById('sip').classList.contains('active')) calcTool('sip');
            if(document.getElementById('emi').classList.contains('active')) calcTool('emi');
            if(document.getElementById('arb').classList.contains('active')) calcTool('arb');
        });
    }

    function calcTool(type) {
        if(type === 'sip') {
            const P = parseFloat(document.getElementById('sip_amt').value);
            const N = parseFloat(document.getElementById('sip_years').value);
            const R = parseFloat(document.getElementById('sip_rate').value);
            let val = 0, mR = R/1200;
            for(let i=0; i<N*12; i++) val = (val + P) * (1 + mR);
            document.getElementById('sip_final').innerText = formatCurrency(val);
            
            drawChart('sipChart', 'line', 
                Array.from({length:N}, (_,i)=>i+1), 
                Array.from({length:N}, (_,i)=>{ let v=0; for(let m=0;m<(i+1)*12;m++) v=(v+P)*(1+mR); return v; }),
                '#6366f1'
            );
        } 
        else if(type === 'emi') {
            const L = parseFloat(document.getElementById('emi_amt').value);
            const Y = parseFloat(document.getElementById('emi_years').value)*12;
            const I = parseFloat(document.getElementById('emi_rate').value)/1200;
            const emi = (L*I*Math.pow(1+I,Y))/(Math.pow(1+I,Y)-1);
            document.getElementById('emi_monthly').innerText = formatCurrency(emi);
            drawChart('emiChart', 'bar', ['Principal', 'Interest'], [L, (emi*Y)-L], '#6366f1');
        }
        else if(type === 'arb') {
            const A = parseFloat(document.getElementById('arb_amt').value);
            const lR = parseFloat(document.getElementById('arb_loan_rate').value)/100;
            const iR = parseFloat(document.getElementById('arb_inv_rate').value)/100;
            let c=A, l=A, lbs=[], d1=[], d2=[];
            for(let i=1; i<=10; i++){ c*=(1+iR); l*=(1+lR); lbs.push(i); d1.push(c); d2.push(l); }
            document.getElementById('arb_net').innerText = formatCurrency(c-l);
            drawChart('arbChart', 'line', lbs, d1, '#10b981', d2);
        }
    }

    function drawChart(id, type, labels, data1, c1, data2=null) {
        const ctx = document.getElementById(id).getContext('2d');
        if(charts[id]) charts[id].destroy();
        
        let datasets = [{ label: 'Value', data: data1, borderColor: c1, backgroundColor: c1, fill: type==='line' }];
        if(data2) datasets.push({ label: 'Loan', data: data2, borderColor: '#f43f5e', borderDash: [5,5] });

        charts[id] = new Chart(ctx, {
            type: type,
            data: { labels, datasets },
            options: { responsive: true, maintainAspectRatio: false, plugins:{legend:{display:false}}, scales:{ x:{display:type==='line'}, y:{display:true} } }
        });
    }

    // --- GAME 1: TRADER ---
    let mmInt, mmP=20000, mmC=1000000;
    function initMM() {
        if(charts['mm']) return;
        charts['mm'] = new Chart(document.getElementById('mmChart'), { type:'line', data:{labels:Array(20).fill(''), datasets:[{data:Array(20).fill(null), borderColor:'#00f3ff', tension:0.1}]}, options:{animation:false, plugins:{legend:{display:false}}, scales:{x:{display:false}, y:{display:false}}} });
        mmInt = setInterval(() => {
            if(!document.getElementById('game1').classList.contains('active')) return;
            mmP += (Math.random()-0.5)*100;
            document.getElementById('mm_price').innerText = mmP.toFixed(0);
            let c = charts['mm']; c.data.datasets[0].data.shift(); c.data.datasets[0].data.push(mmP); c.update('none');
        }, 500);
    }
    function mmAction(dir) { mmC += dir * 50000; document.getElementById('mm_val').innerText = formatCurrency(mmC); }
    function resetMM() { mmC=1000000; mmP=20000; document.getElementById('mm_val').innerText = formatCurrency(mmC); }

    // --- GAME 2: DEFENSE ---
    let pdVal=1000000, pdYr=1;
    function pdAction(mult) {
        pdVal *= mult * (0.9 + Math.random()*0.2); // Random flux
        pdYr++;
        document.getElementById('pd_networth').innerText = formatCurrency(pdVal);
        document.getElementById('pd_year').innerText = "Year " + pdYr;
    }
    function resetPD() { pdVal=1000000; pdYr=1; document.getElementById('pd_networth').innerText = formatCurrency(pdVal); document.getElementById('pd_year').innerText = "Year 1"; }

    // --- GAME 3: WEALTH RUN ---
    let runActive=false, runLane=1, runScore=0, runAnim;
    const lanes = [20, 50, 80];
    function startRun() {
        if(runActive) return; runActive=true; runScore=0;
        document.querySelectorAll('.obstacle').forEach(e=>e.remove());
        spawnObstacle(); loopRun();
    }
    function moveRun(dir) {
        runLane += dir;
        if(runLane < 0) runLane = 0; if(runLane > 2) runLane = 2;
        document.getElementById('run_player').style.left = lanes[runLane] + '%';
    }
    function spawnObstacle() {
        if(!runActive) return;
        const el = document.createElement('div'); el.className='obstacle'; 
        let l = Math.floor(Math.random()*3);
        el.style.left = lanes[l] + '%'; el.dataset.lane = l; el.dataset.y = 0;
        document.getElementById('run_game').appendChild(el);
        setTimeout(spawnObstacle, 1000);
    }
    function loopRun() {
        if(!runActive) return;
        document.querySelectorAll('.obstacle').forEach(el => {
            let y = parseFloat(el.dataset.y); y+=2; el.dataset.y=y;
            el.style.top = y + '%';
            if(y > 80 && y < 90 && parseInt(el.dataset.lane) === runLane) {
                runActive = false; alert("Crashed! Score: " + runScore);
            }
            if(y > 100) { el.remove(); runScore+=10; document.getElementById('run_score').innerText=runScore; }
        });
        runAnim = requestAnimationFrame(loopRun);
    }

    // --- KID 1: COIN QUEST ---
    let kqI=0; const kq=[{n:"Apple",t:"need",i:"üçé"},{n:"Toy",t:"want",i:"üß∏"}];
    function checkKQ(t) {
        let item = kq[kqI%2];
        document.getElementById('kq_res').innerText = (t===item.t) ? "‚úÖ Correct!" : "‚ùå Try Again";
        kqI++; loadKQ();
    }
    function loadKQ() { let item = kq[kqI%2]; document.getElementById('kq_icon').innerText=item.i; document.getElementById('kq_item').innerText=item.n; }
    function resetKQ() { kqI=0; loadKQ(); document.getElementById('kq_res').innerText=""; }

    // Init Logic
    ['sip_amt','sip_years','sip_rate','emi_amt','emi_years','emi_rate','arb_amt','arb_loan_rate','arb_inv_rate'].forEach(attachSlider);
    
    // Initial Render
    setTimeout(() => { openTool('sip'); }, 100);

</script>
</body>
</html>
